# ๐ง ุฅุตูุงุญ ูุดุงูู Docker - ุจูุช ุงูุฃูุตุงุฑ ุงููู

## โ ุงููุดููุฉ ุงูุชู ุชู ุญููุง

### ุงูุฎุทุฃ ุงูุฃุตูู:
```
ERROR: No matching distribution found for sqlite3
ERROR: Could not find a version that satisfies
```

### โ ุงูุญู ุงููุทุจู:
ุชู ุญุฐู `sqlite3` ูู `requirements.txt` ูุฃูู **ูุฏูุฌ ูู Python** ููุง ูุญุชุงุฌ ุชุซุจูุช ูููุตู.

---

## ๐๏ธ ุงูุชุญุณููุงุช ุงููุทุจูุฉ

### 1. ุชุญุณูู `requirements.txt`:
```txt
# ูุจู ุงูุฅุตูุงุญ
sqlite3  # โ ุฎุทุฃ - ูุฏูุฌ ูู Python

# ุจุนุฏ ุงูุฅุตูุงุญ
# sqlite3 ูุญุฐูู - ูุฏูุฌ ูู Python โ
```

### 2. ุชุญุณูู `Dockerfile`:
- ุฅุถุงูุฉ ููุชุจุงุช ุชุทููุฑ ูุทููุจุฉ
- ุชุญุณูู ุนูููุฉ ุงูุจูุงุก
- ุฅุถุงูุฉ ูุญูุตุงุช ุฃูุงู
- ุชุญุณูู ุฅุฏุงุฑุฉ ุงููููุงุช

### 3. ุชุญุณูู `docker-entrypoint.sh`:
- ูุญูุตุงุช ุดุงููุฉ ูุจู ุงูุชุดุบูู
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุญุณูุฉ
- ุชุณุฌูู ููุตู ููุฃุญุฏุงุซ

---

## ๐งช ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญ

### ุชุดุบูู ุงุฎุชุจุงุฑ ุงูุจูุงุก:
```bash
chmod +x test-docker-build.sh
./test-docker-build.sh
```

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
```
โ ูุฌุญ ุจูุงุก ุงูุตูุฑุฉ!
โ ูุฌุญ ุชุดุบูู ุงูุญุงููุฉ!
โ Python ูุนูู ุจุดูู ุตุญูุญ
โ ุฌููุน ุงูููุชุจุงุช ุชุนูู ุจุดูู ุตุญูุญ
โ ุงููููุงุช ููุฌูุฏุฉ ูู ุงูุญุงููุฉ
๐ ุงุฎุชุจุงุฑ ุงูุจูุงุก ููุชูู!
```

---

## ๐ณ ุชุดุบูู ุงูุจูุช ุนุจุฑ Docker

### ุงูุทุฑููุฉ ุงูุณุฑูุนุฉ:
```bash
chmod +x docker-run.sh
./docker-run.sh
```

### ุงูุทุฑููุฉ ุงููุฏููุฉ:
```bash
# ุจูุงุก ุงูุตูุฑุฉ
docker-compose build

# ุชุดุบูู ุงูุจูุช
docker-compose up -d

# ูุฑุงูุจุฉ ุงูุณุฌูุงุช
docker-compose logs -f ansarollah-bot
```

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ

### 1. ุฎุทุฃ ูู ุจูุงุก ุงูุตูุฑุฉ:
```bash
# ุชูุธูู ุงููุธุงู
docker system prune -a

# ุฅุนุงุฏุฉ ุจูุงุก ุจุฏูู cache
docker-compose build --no-cache
```

### 2. ูุดููุฉ ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ:
```bash
# ูุญุต ููู .env
cat .env

# ุงูุชุฃูุฏ ูู ูุฌูุฏ ุงููุชุบูุฑุงุช ุงููุทููุจุฉ
grep -E "BOT_TOKEN|CHAT_ID|ADMIN_ID" .env
```

### 3. ูุดููุฉ ูู ุงูุดุจูุฉ:
```bash
# ูุญุต ุงูุงุชุตุงู ุฏุงุฎู ุงูุญุงููุฉ
docker-compose exec ansarollah-bot ping google.com

# ูุญุต Telegram API
docker-compose exec ansarollah-bot curl https://api.telegram.org/
```

### 4. ูุดููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```bash
# ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช
docker-compose exec ansarollah-bot ls -la /app/data/

# ุฅุนุงุฏุฉ ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
docker-compose exec ansarollah-bot rm -f /app/data/ansarollah_bot.db
docker-compose restart ansarollah-bot
```

### 5. ูุดููุฉ ูู ุงูุฐุงูุฑุฉ:
```bash
# ูุญุต ุงุณุชุฎุฏุงู ุงูููุงุฑุฏ
docker stats ansarollah-news-bot

# ุฒูุงุฏุฉ ุญุฏ ุงูุฐุงูุฑุฉ ูู docker-compose.yml
deploy:
  resources:
    limits:
      memory: 1G
```

---

## ๐ ูุงุฆูุฉ ูุฑุงุฌุนุฉ ุณุฑูุนุฉ

### ูุจู ุงูุชุดุบูู:
- [ ] ุชู ุชุซุจูุช Docker ู Docker Compose
- [ ] ููู `.env` ููุฌูุฏ ููุนุจุฃ ุจุงูุจูุงูุงุช ุงูุตุญูุญุฉ
- [ ] ุฌููุน ุงููููุงุช ุงููุทููุจุฉ ููุฌูุฏุฉ
- [ ] ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช ูุชุงุญ

### ุจุนุฏ ุงูุชุดุบูู:
- [ ] ุงูุญุงููุฉ ุชุนูู: `docker-compose ps`
- [ ] ุงูุณุฌูุงุช ุชุธูุฑ ุจุฏุก ุงูุชุดุบูู
- [ ] ุงูุจูุช ูุณุชุฌูุจ ููุฃูุงูุฑ ูู Telegram
- [ ] ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชู ุฅูุดุงุคูุง

---

## ๐ฏ ุฃูุงูุฑ ูููุฏุฉ

### ูุฑุงูุจุฉ ูุฅุฏุงุฑุฉ:
```bash
# ุญุงูุฉ ุงูุฎุฏูุงุช
docker-compose ps

# ุงูุณุฌูุงุช ุงููุจุงุดุฑุฉ
docker-compose logs -f ansarollah-bot

# ุฏุฎูู ุงูุญุงููุฉ
docker-compose exec ansarollah-bot bash

# ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุช
docker-compose restart ansarollah-bot

# ุฅููุงู ูู ุดูุก
docker-compose down
```

### ุชูุธูู ูุตูุงูุฉ:
```bash
# ุชูุธูู ุงูุตูุฑ ุบูุฑ ุงููุณุชุฎุฏูุฉ
docker image prune -a

# ุชูุธูู ุงูุญุงููุงุช ุงููุชูููุฉ
docker container prune

# ุชูุธูู ุดุงูู
docker system prune -a --volumes
```

### ุงููุณุฎ ุงูุงุญุชูุงุทู:
```bash
# ูุณุฎ ูุงุนุฏุฉ ุงูุจูุงูุงุช
docker cp ansarollah-news-bot:/app/data/ansarollah_bot.db ./backup.db

# ูุณุฎ ุงูุณุฌูุงุช
docker cp ansarollah-news-bot:/app/logs/ ./logs-backup/
```

---

## ๐ ุชุญุณููุงุช ุงูุฃุฏุงุก

### 1. ุชุญุณูู ุงูุฐุงูุฑุฉ:
```yaml
# ูู docker-compose.yml
deploy:
  resources:
    limits:
      memory: 512M
      cpus: '0.5'
    reservations:
      memory: 256M
```

### 2. ุชุญุณูู ุงูุชุฎุฒูู:
```yaml
# ุงุณุชุฎุฏุงู volumes ูุญุณูุฉ
volumes:
  - ./data:/app/data:cached
  - ./logs:/app/logs:delegated
```

### 3. ุชุญุณูู ุงูุดุจูุฉ:
```yaml
# ุดุจูุฉ ูุฎุตุตุฉ
networks:
  ansarollah-net:
    driver: bridge
```

---

## ๐ ุงูุฃูุงู ูุงูุญูุงูุฉ

### 1. ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงูุขููุฉ:
```bash
# ุงุณุชุฎุฏุงู Docker secrets
echo "your_bot_token" | docker secret create bot_token -
```

### 2. ูุณุชุฎุฏู ุบูุฑ ุฌุฐุฑ:
```dockerfile
# ูู Dockerfile
USER botuser  # โ ุขูู
# ุจุฏูุงู ูู root
```

### 3. ูุญุต ุงูุซุบุฑุงุช:
```bash
# ูุญุต ุงูุตูุฑุฉ
docker scan ansarollah-news-bot
```

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

### โ ุชู ุฅุตูุงุญ:
- ูุดููุฉ `sqlite3` ูู requirements.txt
- ุชุญุณูู ุนูููุฉ ุงูุจูุงุก
- ุฅุถุงูุฉ ูุญูุตุงุช ุดุงููุฉ
- ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ๐ ุงูุขู ููููู:
- ุจูุงุก ุงูุตูุฑุฉ ุจูุฌุงุญ
- ุชุดุบูู ุงูุจูุช ุนุจุฑ Docker
- ูุฑุงูุจุฉ ุงูุฃุฏุงุก ูุงูุณุฌูุงุช
- ุฅุฏุงุฑุฉ ุงูุจูุช ุจุณูููุฉ

**ุงูุจูุช ุฌุงูุฒ ููุนูู ุนุจุฑ Docker!** ๐ณโ